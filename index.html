<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>JMVEST Finanzcheck</title>
<style>
  body {
    font-family: 'Segoe UI', sans-serif;
    background: #f5f7f8;
    margin: 0;
    padding: 20px;
    color: #222;
    box-sizing: border-box;
  }
  h1, h2 {
    color: #134e2d;
    text-align: center;
  }
  .container {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    max-width: 1000px;
    margin: 0 auto;
  }
  form {
    flex: 1 1 350px;
    background: white;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 0 12px rgba(0,0,0,0.08);
    min-width: 320px;
  }
  label {
    display: block;
    margin-top: 12px;
    font-weight: 600;
  }
  input, select {
    width: 100%;
    padding: 10px;
    margin-top: 6px;
    border-radius: 6px;
    border: 1px solid #ccc;
    font-size: 1rem;
    box-sizing: border-box;
  }
  button {
    margin-top: 18px;
    width: 100%;
    background: #134e2d;
    color: white;
    padding: 14px;
    border: none;
    border-radius: 8px;
    font-size: 1.1rem;
    cursor: pointer;
    transition: background 0.3s;
  }
  button:hover:enabled {
    background: #0e3c22;
  }
  button:disabled {
    background: #a1a1a1;
    cursor: not-allowed;
  }
  #error {
    color: red;
    margin-top: 12px;
    text-align: center;
    display: none;
  }
  #result {
    flex: 1 1 400px;
    background: white;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 0 15px rgba(0,0,0,0.07);
    display: none;
    min-width: 350px;
    box-sizing: border-box;
    transition: opacity 0.4s ease, transform 0.4s ease;
    opacity: 0;
    transform: translateX(20px);
  }
  #result.visible {
    opacity: 1;
    transform: translateX(0);
    display: block;
  }
  .badge {
    background: #134e2d;
    color: white;
    padding: 6px 12px;
    border-radius: 15px;
    font-size: 0.95rem;
    display: inline-block;
    margin: 10px 0;
  }
  .scenario {
    background: #f0f2f3;
    padding: 10px;
    border-radius: 8px;
    margin: 8px 0;
    font-weight: 500;
  }
  .scenario.highlight {
    background: #d7f7e4;
    font-weight: 700;
    padding: 14px;
    border-left: 6px solid #134e2d;
    font-size: 1.15rem;
    color: #0a3c14;
  }
  .scenario.clean {
    background: transparent;
    padding: 8px 0;
    margin: 8px 0;
    border-radius: 0;
    font-weight: 500;
  }
  .warning {
    background-color: #f44336;
    color: white;
    padding: 12px;
    border-radius: 8px;
    font-weight: 700;
    margin-top: 12px;
  }
  #riskProfileWrapper {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 10px;
    flex-wrap: wrap;
  }
  #debtTip {
    background-color: #fff3cd;
    border: 1px solid #ffeeba;
    color: #856404;
    padding: 12px;
    border-radius: 8px;
    margin-top: 12px;
    font-weight: 600;
  }
  @media (max-width: 720px) {
    .container {
      flex-direction: column;
    }
    #result {
      transform: translateY(20px);
      opacity: 0;
      display: none;
      min-width: auto;
    }
    #result.visible {
      opacity: 1;
      transform: translateY(0);
      display: block;
      margin-top: 25px;
    }
    #riskProfileWrapper {
      flex-direction: column;
      align-items: flex-start;
    }
  }
</style>
</head>
<body>
<h1>ğŸš€ JMVEST Finanzcheck</h1>
<p style="text-align:center;">Finde heraus, ob deine Ziele mit deiner aktuellen Finanzsituation erreichbar sind.</p>
<div class="container">
  <form id="financeForm" novalidate>
    <label for="income">ğŸ’° Monatliches Nettoeinkommen (â‚¬):</label>
    <input type="number" id="income" min="0" required />
    <label for="expenses">ğŸ  Monatliche Fixkosten (â‚¬):</label>
    <input type="number" id="expenses" min="0" required />
    <label for="goal">ğŸ¯ Dein Ziel:</label>
    <select id="goal" required>
      <option value="Eigenheim">ğŸ¡ Eigenheim kaufen (ca. 300.000 â‚¬)</option>
      <option value="FrÃ¼h in Rente">ğŸ–ï¸ FrÃ¼h in Rente gehen (ca. 500.000 â‚¬)</option>
      <option value="VermÃ¶gensaufbau">ğŸ“ˆ VermÃ¶gensaufbau (ca. 200.000 â‚¬)</option>
      <option value="Kinder Studium">ğŸ“ Studium der Kinder finanzieren (ca. 100.000 â‚¬)</option>
      <option value="Weltreise">ğŸŒ Weltreise finanzieren (ca. 30.000 â‚¬)</option>
      <option value="Finanzielle UnabhÃ¤ngigkeit">ğŸ’¸ Finanzielle UnabhÃ¤ngigkeit (ca. 1.000.000 â‚¬)</option>
    </select>
    <label for="assets">ğŸ’¼ Bestehendes investierbares VermÃ¶gen (â‚¬):</label>
    <input type="number" id="assets" min="0" value="0" />
    <label for="debt">ğŸ“‰ Schulden & Verbindlichkeiten:</label>
    <select id="debt" required>
      <option value="Keine">Keine</option>
      <option value="Konsumschulden">Konsumschulden</option>
      <option value="Studienkredite">Studienkredite</option>
      <option value="Immobilienkredite">Immobilienschulden</option>
    </select>
    <label for="lifestyle">ğŸ§­ Dein Lebensstil (Anteil deines Einkommens fÃ¼r variablen Konsum):</label>
    <select id="lifestyle" required>
      <option value="0.15">Sparsam (15%)</option>
      <option value="0.30">Normal (30%)</option>
      <option value="0.45">Komfortabel (45%)</option>
      <option value="0.60">LuxuriÃ¶s (60%)</option>
    </select>
    <label for="risk">ğŸ“ˆ Deine Risikobereitschaft:</label>
    <select id="risk" required>
      <option value="0.025">ğŸ‚ Sehr gering (2.5% p.a.) â€“ Tagesgeld, Anleihen</option>
      <option value="0.055">ğŸ Defensiv Klassisch (5.5% p.a.) â€“ 40% Aktien, 60% Anleihen</option>
      <option value="0.075">ğŸŒ± Ausgewogen Klassisch (7.5% p.a.) â€“ 60% Aktien, 40% Anleihen</option>
      <option value="0.095">ğŸŒ² Wachstumsorientiert Klassisch (9.5% p.a.) â€“ 80% Aktien, 20% Anleihen</option>
      <option value="0.065">ğŸ€ Defensiv Innovativ (6.5% p.a.) â€“ 35% Aktien, 55% Anleihen, 10% Krypto</option>
      <option value="0.09">ğŸŒ³ Ausgewogen Innovativ (9% p.a.) â€“ 55% Aktien, 35% Anleihen, 10% Krypto</option>
      <option value="0.125">ğŸŒ´ Wachstumsorientiert Innovativ (12.5% p.a.) â€“ 70% Aktien, 20% Anleihen, 10% Krypto</option>
    </select>
    <label for="duration">â³ Zeithorizont:</label>
    <select id="duration" required>
      <option value="1">ğŸ• 1 Jahr</option>
      <option value="5">â³ 5 Jahre</option>
      <option value="10">ğŸ—“ï¸ 10 Jahre</option>
      <option value="15" selected>ğŸ“† 15 Jahre</option>
      <option value="20">â° 20 Jahre</option>
    </select>
    <label><input type="checkbox" id="inflation" /> ğŸ“‰ Inflation berÃ¼cksichtigen (2% p.a.)</label>
    <button type="submit">ğŸš€ Check starten</button>
    <p id="error"></p>
  </form>

  <div id="result" aria-live="polite" role="region" aria-label="Ergebnis">
    <h2>Dein Ergebnis</h2>
    <div id="riskProfileWrapper">
      <div class="badge" id="badge"></div>
      <br>
      <div id="analysis"></div>
    </div>
    <div id="goalCosts" class="scenario clean"></div>
    <div id="goalName" class="scenario clean"></div>
    <div id="monthlyInvestable" class="scenario clean"></div>
    <div class="scenario" id="scenario0"></div>
    <div class="scenario" id="scenario1"></div>
    <div class="scenario highlight" id="scenario2"></div>
    <div id="scenario3"></div>
    <div class="scenario" id="recommendation"></div>
    <div id="debtTip" style="display:none;"></div>
  </div>
</div>

<script>
function formatDE(number) {
    return number.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ".");
}
function getDurationEmoji(years) {
    switch(years) {
        case 1: return "ğŸ•";
        case 5: return "â³";
        case 10: return "ğŸ—“ï¸";
        case 15: return "ğŸ“†";
        case 20: return "â°";
        default: return "";
    }
}
document.getElementById('financeForm').addEventListener('submit', function(e){
    e.preventDefault();
    const income = parseFloat(document.getElementById('income').value);
    const expenses = parseFloat(document.getElementById('expenses').value);
    const lifestyleFactor = parseFloat(document.getElementById('lifestyle').value);
    const assets = parseFloat(document.getElementById('assets').value);
    const annualReturn = parseFloat(document.getElementById('risk').value);
    const years = parseInt(document.getElementById('duration').value);
    const inflationCheckbox = document.getElementById('inflation').checked;
    const goal = document.getElementById('goal').value;
    const debt = document.getElementById('debt').value;

    const errorElem = document.getElementById('error');
    const resultDiv = document.getElementById('result');
    const debtTipDiv = document.getElementById('debtTip');
    errorElem.style.display = 'none';
    debtTipDiv.style.display = 'none';

    if (isNaN(income) || income <= 0) {
        errorElem.textContent = "Bitte gib ein gÃ¼ltiges monatliches Nettoeinkommen ein.";
        errorElem.style.display = 'block';
        resultDiv.classList.remove('visible');
        return;
    }
    if (isNaN(expenses) || expenses < 0) {
        errorElem.textContent = "Bitte gib gÃ¼ltige monatliche Fixkosten ein.";
        errorElem.style.display = 'block';
        resultDiv.classList.remove('visible');
        return;
    }
    if (expenses > income) {
        errorElem.textContent = "Fixkosten kÃ¶nnen nicht hÃ¶her als Einkommen sein.";
        errorElem.style.display = 'block';
        resultDiv.classList.remove('visible');
        return;
    }

    // VerfÃ¼gbar zum Sparen/Investieren
    const monthlyAvailable = income - expenses - (income * lifestyleFactor);
    if (monthlyAvailable < 0) {
        errorElem.textContent = "Dein aktueller Lebensstil Ã¼berschreitet dein verfÃ¼gbares Einkommen.";
        errorElem.style.display = 'block';
        resultDiv.classList.remove('visible');
        return;
    }

    // Zukunftsrechnung
    const monthlyRate = annualReturn / 12;
    let fv_noSaving = assets * Math.pow(1 + monthlyRate, years * 12);
    let fv_saveNoInterest = assets + monthlyAvailable * years * 12;
    let fv_invest = assets;

    for (let i = 0; i < years * 12; i++) {
        fv_invest = (fv_invest + monthlyAvailable) * (1 + monthlyRate);
    }

    // Inflationsanpassung
    if (inflationCheckbox) {
        const inflationRate = 0.02;
        fv_noSaving /= Math.pow(1 + inflationRate, years);
        fv_saveNoInterest /= Math.pow(1 + inflationRate, years);
        fv_invest /= Math.pow(1 + inflationRate, years);
    }

    // Zielbetrag setzen
    let goalAmount = 100000; // Default
    switch(goal) {
        case "Eigenheim": goalAmount = 300000; break;
        case "FrÃ¼h in Rente": goalAmount = 500000; break;
        case "VermÃ¶gensaufbau": goalAmount = 200000; break;
        case "Kinder Studium": goalAmount = 100000; break;
        case "Weltreise": goalAmount = 30000; break;
        case "Finanzielle UnabhÃ¤ngigkeit": goalAmount = 1000000; break;
        default: goalAmount = 100000; break;
    }

    // Risikoprofiltext
    let type = "";
    switch(annualReturn) {
        case 0.025: type = "ğŸ‚ Sehr gering (2.5% p.a.)"; break;
        case 0.055: type = "ğŸ Defensiv Klassisch (5.5% p.a.)"; break;
        case 0.065: type = "ğŸ€ Defensiv Innovativ (6.5% p.a.)"; break;
        case 0.075: type = "ğŸŒ± Ausgewogen Klassisch (7.5% p.a.)"; break;
        case 0.09:  type = "ğŸŒ³ Ausgewogen Innovativ (9% p.a.)"; break;
        case 0.095: type = "ğŸŒ² Wachstumsorientiert Klassisch (9.5% p.a.)"; break;
        case 0.125: type = "ğŸŒ´ Wachstumsorientiert Innovativ (12.5% p.a.)"; break;
        default: type = "Unbekannt"; break;
    }

    // Ergebnisse ausgeben
    let riskText = `Dein Risikoprofil ist: ${type}`;
    document.getElementById('badge').innerText = riskText;

    document.getElementById('analysis').innerHTML = `
        <p>â³ Zeithorizont: ${years} Jahre ${getDurationEmoji(years)}</p>
        <p>ğŸ’µ Monatlich verfÃ¼gbar zum Sparen/Investieren: <strong>â‚¬ ${formatDE(monthlyAvailable)}</strong></p>
    `;
    document.getElementById('goalCosts').innerText = `ğŸ’° Gesamtkosten Ziel "${goal}": ca. â‚¬ ${formatDE(goalAmount)}`;
    document.getElementById('goalName').innerText = `ğŸ¯ Dein Ziel: ${goal}`;
    document.getElementById('monthlyInvestable').innerText = `ğŸ“Š Monatlich investierbar: â‚¬ ${formatDE(monthlyAvailable)}`;
    document.getElementById('scenario0').innerText = `Ohne Sparen wÃ¤chst dein VermÃ¶gen (nur Zinseszins auf bestehendes VermÃ¶gen) auf ca. â‚¬ ${formatDE(fv_noSaving)}`;
    document.getElementById('scenario1').innerText = `Wenn du nur sparen wÃ¼rdest (ohne Verzinsung), hÃ¤ttest du nach ${years} Jahren ca. â‚¬ ${formatDE(fv_saveNoInterest)}`;
    document.getElementById('scenario2').innerText = `Mit deinem aktuellen Spar- und Investitionsplan kÃ¶nntest du ca. â‚¬ ${formatDE(fv_invest)} erreichen.`;

    // Empfehlung und Styling
    let gap = fv_invest - goalAmount;
    let adviceElem = document.getElementById('recommendation');
    if (gap >= 0) {
        adviceElem.innerText = "ğŸ‰ Du erreichst dein Ziel mit deinem aktuellen Spar- und Investitionsplan!";
        adviceElem.classList.remove('warning');
    } else {
        adviceElem.innerHTML = `âš ï¸ Du erreichst dein Ziel nicht ganz. Es fehlen noch etwa â‚¬ ${formatDE(-gap)}. Ãœberdenke Sparrate oder Anlagestrategie.`;
        adviceElem.classList.add('warning');
    }

    // Tipp bei Schulden
    if (debt !== "Keine") {
        debtTipDiv.style.display = "block";
        let tipText = "";
        switch(debt) {
            case "Konsumschulden":
                tipText = "ğŸ’¡ Tipp: Priorisiere den Abbau von Konsumschulden, bevor du grÃ¶ÃŸere Investitionen tÃ¤tigst.";
                break;
            case "Studienkredite":
                tipText = "ğŸ’¡ Tipp: Behalte deine Studienkredite im Auge und versuche, planmÃ¤ÃŸig abzuzahlen.";
                break;
            case "Immobilienkredite":
                tipText = "ğŸ’¡ Tipp: Du hast Immobilienschulden. Achte auf eine solide Tilgungsstrategie, um deine Schulden effizient zu reduzieren.";
                break;
            default:
                tipText = "";
        }
        debtTipDiv.innerText = tipText;
    } else {
        debtTipDiv.style.display = "none";
        debtTipDiv.innerText = "";
    }

    resultDiv.classList.add('visible');
});
</script>
</body>
</html>
